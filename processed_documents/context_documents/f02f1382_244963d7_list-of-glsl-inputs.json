{
  "content": "List of GLSL Shader Inputs\n\nIn general, the majority of GLSL shader input types can be specified from a Panda3D application using a call to .NodePath.set_shader_input(). However, it is often desirable to let Panda3D automatically fill in the values of shader inputs, especially for inputs that derive their values from the render state or 3-D transformation of the currently rendered model.\n\nThis page demonstrates which shader input names have a special meaning and will be automatically filled in by Panda3D when the shader is used. Note that the names and types have to be copied verbatim.\n\nVertex shader attributes\n\nThe following attributes are only permissible in vertex shaders.\n\nThese inputs use GLSL 1.40 syntax and above. In versions below that, it may be necessary to replace the \"in\" keyword with \"attribute\".\n\n// The position, normal vector and color of the currently processed vertex.\nin vec4 p3d_Vertex;\nin vec3 p3d_Normal;\nin vec4 p3d_Color;\n\n// The texture coordinates associated with the Nth texture.\nin vec2 p3d_MultiTexCoord0;\nin vec2 p3d_MultiTexCoord1;\nin vec2 p3d_MultiTexCoord2;\n\n// These are the tangent and binormal vectors, if present.  If an index is appended,\n// it will use the set of binormals and tangents associated with the Nth texture.\nin vec3 p3d_Binormal;\nin vec3 p3d_Binormal0;\nin vec3 p3d_Binormal1;\nin vec3 p3d_Tangent;\nin vec3 p3d_Tangent0;\nin vec3 p3d_Tangent1;\n\n// Some models, such as those loaded from glTF, only have a 4-component tangent\n// vector and no binormal.  In this case, the binormal is derived as follows:\n//   binormal = cross(p3d_Normal, p3d_Tangent.xyz) * p3d_Tangent.w\nin vec4 p3d_Tangent;\n\n// A vertex column named \"anything\".  The number of components should match up with\n// that of the vertex array.  \"uvec\" and \"ivec\" variants are allowed for integer\n// vertex arrays to access un-normalized data.\nin vec4 anything;\n\n// These two attributes will be present when hardware skinning is enabled.\n// transform_index contains indices into the p3d_TransformTable array for the four\n// most influential joints, and transform_weight the corresponding weights.\nin vec4 transform_weight;\nin uvec4 transform_index;\n\nA special note about vertex colors\n\nBefore Panda3D 1.10, if p3d_Color was used but no vertex color information was present on the model, the values would be undefined (but usually (0, 0, 0, 0)). This means that you could not use the same shader on objects with and without vertex colors, since objects without vertex colors would appear black instead of white.\n\nIn 1.10, p3d_Color respects the ColorAttrib rules that also applied to the fixed-function pipeline: p3d_Color will contain a white color if the vertex colors are absent or if colors are disabled using ~.NodePath.set_color_off(), and a flat color if one is applied using ~.NodePath.set_color(), even if vertex colors are present.\n\nIf you are absolutely certain that the model does not have vertex colors, you may also declare p3d_Color as a uniform instead of a vertex attribute.\n\nIf you would like to treat the color column as a generic vertex attribute with no special handling, you should use the name \"color\" instead of \"p3d_Color\", which will bind it without any special handling.\n\nUniform shader inputs\n\nThe following shader inputs are uniform, which means that they are constant across the entire piece of geometry, rather than changing from vertex to vertex. They have to be declared with the uniform qualifier, and may be accessed in any shader stage.\n\n// This is probably the most important uniform, transforming a model-space\n// coordinate into a clip-space (ie. relative to the window) coordinate.  This\n// is usually used in the vertex shader to transform p3d_Vertex and store the\n// result in gl_Position.\nuniform mat4 p3d_ModelViewProjectionMatrix;\n\n// These are parts of the above matrix.\nuniform mat4 p3d_ModelViewMatrix;\nuniform mat4 p3d_ProjectionMatrix;\nuniform mat4 p3d_ModelMatrix;\nuniform mat4 p3d_ViewMatrix;\nuniform mat4 p3d_ViewProjectionMatrix;\n\n// This is the upper 3x3 of the inverse transpose of the ModelViewMatrix.  It is\n// used to transform the normal vector into view-space coordinates.\nuniform mat3 p3d_NormalMatrix;\n\n// It's possible to append Inverse, Transpose, or InverseTranspose to any of the\n// above matrix names to get an inverse and/or transpose version of that matrix:\nuniform mat4 p3d_ProjectionMatrixInverse;\nuniform mat4 p3d_ProjectionMatrixTranspose;\nuniform mat4 p3d_ModelViewMatrixInverseTranspose;\n\n// These access the Nth texture applied to the model.  The index matches up with\n// the index used by p3d_MultiTexCoordN, p3d_TangentN, and p3d_BinormalN.\n// The sampler type should be adjusted to match the type of the texture.\nuniform sampler2D p3d_Texture0;\nuniform sampler2DArray p3d_Texture1;\nuniform sampler3D p3d_Texture2;\nuniform samplerCube p3d_Texture3;\n\n// As above, but \"Shadow\" should be appended if the texture has a shadow filter.\nuniform sampler2DShadow p3d_Texture0;\n\n// Experimental inputs, new in 1.10.8, containing textures assigned using a\n// particular TextureStage mode.  If no such texture has been assigned, a dummy\n// texture is instead provided containing an appropriate default color.\nuniform sampler2D p3d_TextureModulate[]; // default color: (1, 1, 1, 1)\nuniform sampler2D p3d_TextureAdd[];      // default color: (0, 0, 0, 1)\nuniform sampler2D p3d_TextureNormal[];   // default color: (0.5, 0.5, 1, 0)\nuniform sampler2D p3d_TextureHeight[];   // default color: (0.5, 0.5, 1, 0)\nuniform sampler2D p3d_TextureGloss[];    // default color: (1, 1, 1, 1)\n\n// New in 1.10.0.  Contains the matrix generated from texture pos and scale.\nuniform mat4 p3d_TextureMatrix[];\n\n// Access the color scale applied to the node.\nuniform vec4 p3d_ColorScale;\n\n// Access the material attributes assigned via a Material object.\n// Unused struct parameters may be omitted without consequence.\nuniform struct p3d_MaterialParameters {\n  vec4 ambient;\n  vec4 diffuse;\n  vec4 emission;\n  vec3 specular;\n  float shininess;\n\n  // These properties are new in 1.10.\n  vec4 baseColor;\n  float roughness;\n  float metallic;\n  float refractiveIndex;\n} p3d_Material;\n\n// The sum of all active ambient light colors.\nuniform struct p3d_LightModelParameters {\n  vec4 ambient;\n} p3d_LightModel;\n\n// Active clip planes, in apiview space.  If there is no clip plane for a given\n// index, it is guaranteed to contain vec4(0, 0, 0, 0).\nuniform vec4 p3d_ClipPlane[...];\n\n// Reports the frame time of the current frame, for animations.\nuniform float osg_FrameTime;\n// The time elapsed since the previous frame.\nuniform float osg_DeltaFrameTime;\n// New in 1.10.0. Contains the number of frames elapsed since program start.\nuniform int osg_FrameNumber;\n\n// If hardware skinning is enabled, this contains the transform of each joint.\n// Superfluous array entries will contain the identity matrix.\nuniform mat4 p3d_TransformTable[...];\n\n// New in 1.10.  Contains information for each non-ambient light.\n// May also be used to access a light passed as a shader input.\nuniform struct p3d_LightSourceParameters {\n  // Primary light color.\n  vec4 color;\n\n  // Light color broken up into components, for compatibility with legacy\n  // shaders.  These are now deprecated.\n  vec4 ambient;\n  vec4 diffuse;\n  vec4 specular;\n\n  // View-space position.  If w=0, this is a directional light, with the xyz\n  // being -direction.\n  vec4 position;\n\n  // Spotlight-only settings\n  vec3 spotDirection;\n  float spotExponent;\n  float spotCutoff;\n  float spotCosCutoff;\n\n  // Individual attenuation constants\n  float constantAttenuation;\n  float linearAttenuation;\n  float quadraticAttenuation;\n\n  // constant, linear, quadratic attenuation in one vector\n  vec3 attenuation;\n\n  // Shadow map for this light source\n  sampler2DShadow shadowMap;\n\n  // Transforms view-space coordinates to shadow map coordinates\n  mat4 shadowViewMatrix;\n} p3d_LightSource[...];\n\n// New in 1.10.  Contains fog state.\nuniform struct p3d_FogParameters {\n  vec4 color;\n  float density;\n  float start;\n  float end;\n  float scale; // 1.0 / (end - start)\n} p3d_Fog;\n\nBesides these predefined uniform inputs, it is possible to use most of the types available in GLSL in conjunction with ~.NodePath.set_shader_input() to pass custom data, including arrays and structs, to a certain named shader input. You may not use ~.NodePath.set_shader_input() to override any of the inputs with the p3d_ prefix.",
  "metadata": {
    "source": "corpus_panda3d/collected_docs/244963d7_list-of-glsl-inputs.rst",
    "doc_type": "rst",
    "file_path": "processed_documents/context_documents/f02f1382_244963d7_list-of-glsl-inputs.json",
    "doc_id": "doc_659"
  }
}