{
  "content": "Transmitting Data\n\nOnce a connection has been established, data can be transmitted from one Panda program to another using the classes described in this section. Communication can happen in both directions (i.e. client-to-server or server-to-client); once the connection has been established, either side may send messages along the connection to the other side.\n\nThis section describes message passing in detail, first transmission, then receipt of a message.\n\nSending a message\n\nTo send a message along an established connection, the sender must first construct a PyDatagram containing the message. This involves instantiating a PyDatagram object and then populating its contents with the desired data. The type of the data is determined by the functions used to pack it; see the full documentation of the PyDatagram class for more details.\n\n# Developer-defined constants, telling the server what to do.\n# Your style of how to store this information may differ; this is\n# only one way to tackle the problem\nPRINT_MESSAGE = 1\n\ndef myNewPyDatagram(self):\n    # Send a test message\n    myPyDatagram = PyDatagram()\n    myPyDatagram.addUint8(PRINT_MESSAGE)\n    myPyDatagram.addString(\"Hello, world!\")\n    return myPyDatagram\n\nAs shown in the previous section, once the datagram is constructed you may then send it using a ConnectionWriter.\n\ncWriter.send(myPyDatagram, aConnection)\n\nReceiving a message\n\nAs shown in the previous section, when a message is received via a QueuedConnectionReader, it can be retrieved into a NetDatagram:\n\ndatagram = NetDatagram()\nif cReader.getData(datagram):\n    myProcessDataFunction(datagram)\n\nA NetDatagram contains the original information that was stored in the transmitted PyDatagram. It also contains knowledge of the connection over which it was received and the address of the connection. To retrieve the connection, use the getConnection method:\n\nsourceOfMessage = datagram.getConnection()\n\nTo retrieve the contents of the message, use the PyDatagramIterator. The iterator class acts as the complement of the PyDatagram class; its methods can be used to retrieve the content that was encoded using PyDatagram.\n\ndef myProcessDataFunction(netDatagram):\n    myIterator = PyDatagramIterator(netDatagram)\n    msgID = myIterator.getUint8()\n    if msgID == PRINT_MESSAGE:\n        messageToPrint = myIterator.getString()\n        print(messageToPrint)\n\nNote\n\nIt is assumed that the message recipient will retrieve the same type of content in the same order that the message sender packed the content. No mechanism exists in the PyDatagramIterator to ensure that the data being unpacked matches the requested type. Unpacking the data using a different type function will probably result in unexpected behavior.",
  "metadata": {
    "source": "corpus_panda3d/collected_docs/a2fae2c7_transmitting-data.rst",
    "doc_type": "rst",
    "file_path": "processed_documents/context_documents/fa93ed35_a2fae2c7_transmitting-data.json",
    "doc_id": "doc_652"
  }
}