{
  "content": "import os\nimport imp\n\n\nclass FileMgr:\n    \"\"\" To handle data file \"\"\"\n\n    def __init__(self, editor=None):\n        self.editor = editor\n\n    def saveToFile(self, fileName):\n        try:\n            f = open(fileName, 'w')\n            f.write(\"from panda3d.core import *\\n\")\n            f.write(\"\\nif hasattr(base, 'le'):\\n\")\n            f.write(\"    objectMgr = base.le.objectMgr\\n\")\n            f.write(\"    animMgr = base.le.animMgr\\n\")\n            f.write(\"    ui = base.le.ui\\n\")\n            f.write(\"    ui.sceneGraphUI.reset()\\n\\n\")\n            f.write(\"else:\\n\")\n            f.write(\"    objectMgr = base.objectMgr\\n\")\n            f.write(\"# temporary place holder for nodepath\\n\")\n            f.write(\"objects = {}\\n\")\n            f.write(\"animMgr.keyFramesInfo = \"+str(self.editor.animMgr.keyFramesInfo)+\"\\n\")\n            f.write(\"animMgr.curveAnimation = \"+str(self.editor.animMgr.curveAnimation)+\"\\n\")\n            saveData = self.editor.objectMgr.getSaveData()\n            for data in saveData:\n                f.write(data)\n                f.write('\\n')\n            saveDataLayers = self.editor.ui.layerEditorUI.getSaveData()\n            for data in saveDataLayers:\n                f.write(data)\n                f.write('\\n')\n            f.close()\n            self.editor.updateStatusReadout('Sucessfully saved to %s'%fileName)\n            self.editor.fNeedToSave = False\n        except IOError:\n            print('failed to save %s'%fileName)\n            if f:\n                f.close()\n\n    def loadFromFile(self, fileName):\n        dirname, moduleName = os.path.split(fileName)\n        if moduleName.endswith('.py'):\n            moduleName = moduleName[:-3]\n        file, pathname, description = imp.find_module(moduleName, [dirname])\n        try:\n            module = imp.load_module(moduleName, file, pathname, description)\n            self.editor.updateStatusReadout('Sucessfully opened file %s'%fileName)\n            self.editor.fNeedToSave = False\n        except Exception:\n            print('failed to load %s'%fileName)\n",
  "metadata": {
    "source": "corpus_panda3d/source_code/direct/src/leveleditor/FileMgr.py",
    "doc_type": "python",
    "file_path": "processed_documents/context_documents/10b6518e_FileMgr.json",
    "doc_id": "doc_52"
  }
}