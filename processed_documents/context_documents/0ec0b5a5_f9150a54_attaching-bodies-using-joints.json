{
  "content": "Attaching Bodies using Joints\n\nJoints\n\nIn most situations, you won't have just solid box-shaped or cylinder-shaped models, but for example a human character has multiple body parts which can all move in a different way. If you would make the entire character one solid body, you wouldn't be able to move them independently of each other, and if you made every body part a separate solid body, all the body parts would fall off since they are not attached to each other. This is where Joints come in.\n\nJoints are basically used to attach bodies to each other, or to attach a body to the environment. There are several different kinds of joints: OdeHingeJoint, OdeBallJoint, OdeSliderJoint, just to name a few. (Check the panda3d.ode page in the API Reference for a more complete list.)\n\nOdeBallJoint example\n\nTo explain how joints work, look at the following example:\n\nfrom direct.directbase import DirectStart\nfrom direct.directtools.DirectGeometry import LineNodePath\nfrom panda3d.core import *\nfrom panda3d.ode import *\n\n# Load the smiley and frowney models\nsmiley = loader.loadModel(\"smiley.egg\")\nsmiley.reparentTo(render)\nsmiley.setPos(-5, 0, -5)\nfrowney = loader.loadModel(\"frowney.egg\")\nfrowney.reparentTo(render)\nfrowney.setPos(-12.5, 0, -7.5)\n\n# Setup our physics world\nworld = OdeWorld()\nworld.setGravity(0, 0, -9.81)\n\n# Setup the body for the smiley\nsmileyBody = OdeBody(world)\nM = OdeMass()\nM.setSphere(5000, 1.0)\nsmileyBody.setMass(M)\nsmileyBody.setPosition(smiley.getPos(render))\nsmileyBody.setQuaternion(smiley.getQuat(render))\n\n# Now, the body for the frowney\nfrowneyBody = OdeBody(world)\nM = OdeMass()\nM.setSphere(5000, 1.0)\nfrowneyBody.setMass(M)\nfrowneyBody.setPosition(frowney.getPos(render))\nfrowneyBody.setQuaternion(frowney.getQuat(render))\n\n# Create the joints\nsmileyJoint = OdeBallJoint(world)\nsmileyJoint.attach(smileyBody, None) # Attach it to the environment\nsmileyJoint.setAnchor(0, 0, 0)\nfrowneyJoint = OdeBallJoint(world)\nfrowneyJoint.attach(smileyBody, frowneyBody)\nfrowneyJoint.setAnchor(-5, 0, -5)\n\n# Set the camera position\nbase.disableMouse()\nbase.camera.setPos(0, 50, -7.5)\nbase.camera.lookAt(0, 0, -7.5)\n\n# We are going to be drawing some lines between the anchor points and the joints\nlines = LineNodePath(parent=render, thickness=3.0, colorVec=(1, 0, 0, 1))\ndef drawLines():\n    # Draws lines between the smiley and frowney.\n    lines.reset()\n    lines.drawLines([((frowney.getX(), frowney.getY(), frowney.getZ()),\n                      (smiley.getX(), smiley.getY(), smiley.getZ())),\n                     ((smiley.getX(), smiley.getY(), smiley.getZ()),\n                      (0, 0, 0))])\n    lines.create()\n\n# The task for our simulation\ndef simulationTask(task):\n    # Step the simulation and set the new positions\n    world.quickStep(globalClock.getDt())\n    frowney.setPosQuat(render, frowneyBody.getPosition(), frowneyBody.getQuaternion())\n    smiley.setPosQuat(render, smileyBody.getPosition(), smileyBody.getQuaternion())\n    drawLines()\n    return task.cont\n\ndrawLines()\ntaskMgr.doMethodLater(0.5, simulationTask, \"Physics Simulation\")\n\nbase.run()\n\nThe part of the code that does the magic is this:\n\n# Create the joints\nsmileyJoint = OdeBallJoint(world)\nsmileyJoint.attach(smileyBody, None) # Attach it to the environment\nsmileyJoint.setAnchor(0, 0, 0)\nfrowneyJoint = OdeBallJoint(world)\nfrowneyJoint.attach(smileyBody, frowneyBody)\nfrowneyJoint.setAnchor(-5, 0, -5)\n\nThis creates two joints, the first to attach the smiley to the environment, and the second to attach the frowney to the smiley. The attach() method on the joint is used to set the two bodies that are attached; you can replace either argument with None to attach them to the environment. The setAnchor method is used to set the anchor point for the joints.\n\nIn this image you can see how the joints are set up:",
  "metadata": {
    "source": "corpus_panda3d/collected_docs/f9150a54_attaching-bodies-using-joints.rst",
    "doc_type": "rst",
    "file_path": "processed_documents/context_documents/0ec0b5a5_f9150a54_attaching-bodies-using-joints.json",
    "doc_id": "doc_435"
  }
}