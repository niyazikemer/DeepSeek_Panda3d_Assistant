{
  "content": "The chunk of code is a comprehensive example demonstrating how to project a texture onto a 3D actor in Panda3D. Here's the structured breakdown:\n\n1. **Actor Setup**: The 'ripple' actor is loaded from an egg file, positioned, scaled, and animated within the scene.\n\n2. **Lighting Configuration**: A directional light is attached to the camera to ensure proper illumination of the actor, enhancing visual effects like shadows or highlights.\n\n3. **Projector Node Creation**: A projector node with a PerspectiveLens is created. The frustum visualization in red helps in understanding the projection area. A camera model is attached for better visualization of the projector's position and orientation.\n\n4. **Texture Configuration**: The texture 'envir-reeds.png' is loaded with specific wrapping settings to prevent tiling, ensuring it appears as a projected image without repetition.\n\n5. **Projecting Texture**: Using `projectTexture`, the texture is applied onto the actor from the projector node's position, considering its lens properties and orientation.\n\n6. **Camera Positioning**: The camera is positioned to frame the scene correctly for capturing the final output, which includes disabling mouse input and taking a screenshot.\n\nThis setup illustrates how to use Panda3D's built-in TexProjector feature without additional shaders, emphasizing proper positioning of the projector node relative to the actor. Understanding the TextureStage parameters helps in controlling how the projected texture interacts with other materials on the actor.\n\nripple = Actor.Actor('ripple.egg')\nripple.reparentTo(render)\nripple.setScale(10)\nripple.pose('animation', 17)\n\ndl = DirectionalLight('dl')\ndlnp = camera.attachNewNode(dl)\nripple.setLight(dlnp)\n\nproj = render.attachNewNode(LensNode('proj'))\nlens = PerspectiveLens()\nproj.node().setLens(lens)\nproj.node().showFrustum()\nproj.find('frustum').setColor(1, 0, 0, 1)\ncamModel = loader.loadModel('camera.egg')\ncamModel.reparentTo(proj)\nproj.reparentTo(render)\nproj.setPos(1.5, -7.3, 2.9)\nproj.setHpr(22, -15, 0)\n\ntex = loader.loadTexture('maps/envir-reeds.png')\ntex.setWrapU(SamplerState.WMBorderColor)\ntex.setWrapV(SamplerState.WMBorderColor)\ntex.setBorderColor((1, 1, 1, 0))\nts = TextureStage('ts')\nts.setSort(1)\nts.setMode(TextureStage.MDecal)\nripple.projectTexture(ts, tex, proj)\n\nbase.disableMouse()\ncamera.setPos(-7.8, -22.4, 0)\ncamera.setHpr(-21, 0, 0)\n\nbase.graphicsEngine.renderFrame()\nbase.screenshot('projected_bamboo.jpg', defaultFilename=0)",
  "metadata": {
    "doc_type": "rst",
    "doc_id": "doc_433",
    "parent": "processed_documents/context_documents/bfad65d1_ce5c5443_projected-textures.json",
    "chunk_number": 6203
  }
}