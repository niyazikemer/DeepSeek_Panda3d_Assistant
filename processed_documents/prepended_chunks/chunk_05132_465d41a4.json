{
  "content": "The chunk sits inside the `update()` method of the motion trail implementation, specifically within the conditional block handling relative matrix calculations. It processes each segment of the motion trail's frame list to set up transformation matrices, either relative or absolute, for generating the trail's geometry.\n\n```plaintext\nContext: The code chunk is part of the update() method responsible for processing each segment in the motion trail's frame list. It calculates start and end transformations based on whether relative matrix calculations are enabled, preparing data needed to generate the motion trail's geometry.\n```\n\n# add vertices to each NurbsCurveEvaluator\n                    segment_index = 0\n                    while segment_index < total_segments:\n                        motion_trail_frame_start = self.frame_list[segment_index]\n                        motion_trail_frame_end = self.frame_list[segment_index + 1]\n\n                        vertex_segment_index = 0\n\n                        if self.calculate_relative_matrix:\n                            start_transform = Mat4()\n                            end_transform = Mat4()\n\n                            start_transform.multiply(motion_trail_frame_start.transform, inverse_matrix)\n                            end_transform.multiply(motion_trail_frame_end.transform, inverse_matrix)\n\n                        else:\n                            start_transform = motion_trail_frame_start.transform\n                            end_transform = motion_trail_frame_end.transform",
  "metadata": {
    "doc_type": "python",
    "doc_id": "doc_290",
    "parent": "processed_documents/context_documents/38565614_MotionTrail.json",
    "chunk_number": 5132
  }
}